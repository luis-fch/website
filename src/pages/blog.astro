---
import { getCollection } from "astro:content";
import HomeLayout from "../layouts/HomeLayout.astro";
import BlogCard from "../components/BlogCard.astro";

const posts = await getCollection("blog");
const sortedPosts = posts.sort(
  (a, b) =>
    new Date(b.data.published_date).getTime() -
    new Date(a.data.published_date).getTime(),
);
---

<HomeLayout title="Blog">
  <main class="px-4 py-12 my-8">
    <h1 class="text-6xl font-bold mb-8">Blog</h1>
    <div class="grid gap-2">
      {
        sortedPosts.map((post) => (
          <BlogCard
            title={post.data.title}
            description={post.data.description}
            published_date={post.data.published_date.toLocaleDateString(
              "en-US",
              {
                year: "numeric",
                month: "long",
                day: "numeric",
              },
            )}
            id={post.id}
          />
        ))
      }
    </div>
  </main>
</HomeLayout>
